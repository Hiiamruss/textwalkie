<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Text-Walkie-Talkie</title>
  <!-- Firebase scripts (compat version for plain HTML) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
</head>
<body>
  <section>
    <h1>Text walkie-talkie</h1>
    <a href="help.html"><button>How to use?</button></a>
  </section>
  <section>
    <input id="room" placeholder="Enter frequency (any word, letter, number, symbols):">
  </section>
  <section>
     <input id="name" placeholder="Your name">
  </section>
  <section>
      <input id="message" placeholder="Type a message">
  </section>
  <section>
    <button onclick="connect()">Connect</button>
    <button onclick="sendBell()" disabled id="sendBtn">Send message.</button>
  </section>
  
  <script>
    
    const firebaseConfig = {
      apiKey: "AIzaSyBguqCU6NI9Q3NRMJiA4W4LErU6qt2A9gk",
      authDomain: "bell-27dbe.firebaseapp.com",
      databaseURL: "https://bell-27dbe-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "bell-27dbe",
      storageBucket: "bell-27dbe.firebasestorage.app",
      messagingSenderId: "519724590988",
      appId: "1:519724590988:web:109ed77d93560e1b7d18a9"
    };

   
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    let roomRef = null;
    let myName = "";

    
    function connect() {
      const room = document.getElementById("room").value;
      myName = document.getElementById("name").value || "Anonymous";
      roomRef = db.ref("rooms/" + room);
      roomRef.on("child_added", snap => {
        const bell = snap.val();
        if (bell.sender !== myName) {
          alert(bell.sender + " says: " + bell.message);
        }
      });
      document.getElementById("sendBtn").disabled = false;
      alert("Connected to room: " + room);
    }

    function sendBell() {
      const msg = document.getElementById("message").value;
      const bell = { sender: myName, time: Date.now(), message: msg };
      roomRef.push(bell);
      alert("Bell successfully sent")
    }
  </script>
</body>
</html>